// room script file

function room_FirstLoad()
{
	// todo: tocar música tema
	aWindless_Slopes.Play(eAudioPriorityNormal, eRepeat);
}

function room_AfterFadeIn()
{
	gStatusline.Visible = true;
	gIconbar.Visible = true;
	mouse.Visible = true;	
}

function hInicioToCamp_WalkOn()
{
  player.ChangeRoom(2, 18, 127);
}

function hPlacaInicio_Interact()
{
  player.Walk(17, 143, eBlock, eWalkableAreas);
  Display("Bem vindo ao Vale do Amanhecer!");
}

function hPlacaDuplaInicio_Interact()
{
  player.Walk(207, 93, eBlock, eWalkableAreas);
  Display("OESTE: Saída do Vale do Amanhecer\nSUL: Floresta da Luz\nLESTE: Dojo do Sensei Ki");
}

function oVaraPescar_Look()
{
  player.Say("Hmm, parece uma vara de pescar. De repente posso usá-la para pescar algo.");
}

function oVaraPescar_Interact()
{
  player.Walk(131, 98, eBlock, eWalkableAreas);
	player.Say("Perfeito, tenho certeza que poderei usá-la para pescar um peixe no futuro.");
	player.Say("Nunca se sabe.. he he");
	player.AddInventory(iVaraPescar);
	aItem.Play();
	Display("Você pegou uma Vara de Pescar e guardou no seu inventário."); // todo: tocar o som de item
	oVaraPescar.Visible = false;
}

function hFlorestaLuz_WalkOn()
{
	player.Say("Mais ao sul existe uma floresta encantada..");
	player.Say("Ouvi dizer que as árvores emitem luzes e o céu parece a aurora boreal.");
	player.Say("..dever ser lindo, mas não posso ir lá agora.");
	player.Say("Preciso encontrar o Sensei no Dojo!");
	player.Walk(206, 171, eBlock);
}

function hPontoPescaria_Interact()
{
	player.Walk(115, 108,  eBlock); // jogador vai até o ponto de pesca
	// state machine para decisão de pescar o peixe
	if ( !player.HasInventory(iPeixe) && !player.HasInventory(iVaraPescar) )
	{
		 // voce não tem a vara nem o peixe
		 player.Say("Talvez eu tenha que pegar a vara de pescar antes de qualquer coisa");
	} else if (!player.HasInventory(iPeixe) && player.HasInventory(iVaraPescar) )
	{
		// voce tem a vaca mas não tem o peixe
		player.Say("Hmmm.. acho que somente com a vara eu não vou conseguir pegar nada..");
		player.Say("Preciso procurar uma isca adequada");
	} else if (player.HasInventory(iPeixe))
	{
		//voce tem o peixe
		player.Say("Eu já tenho um peixe");
		player.Say("Acho que seria interessante fazer alguma comida com ele..");
		player.Say("Talvez aquele vendendor poderia me ajudar no preparo");
	}
}

function hPontoPescaria_UseInv()
{
	if ((player.ActiveInventory == iVacaIsca) && (!player.HasInventory(iPeixe)))
	{
		//voce tem a vara com uma isca
		player.Say("UHULL! Acho que agora eu tenho o que é necessário para pescar!");
		player.Say("SWISH!");
		player.Say("Espera... Espera.. Espera..");
		player.Say("WOAH!");
		player.AddInventory(iPeixe);
		player.LoseInventory(iVacaIsca);
		Display("Você pescou um dos grandes.");
		aItem.Play();
		Display("Um peixe fresco foi adicionado ao seu inventório");
	} else {
		//voce tem o peixe
		player.Say("Eu já tenho um peixe");
		player.Say("Acho que seria interessante fazer alguma comida com ele..");
		player.Say("Talvez aquele vendendor poderia me ajudar no preparo");
	}

}

function hSegredoFinal2_WalkOn()
{
	aItem.Play();
	player.AddInventory(iBerry);
	Display("Frutas silvestres foram adicionadas ao seu inventório");
	hSegredoFinal2.Enabled = false;
}
